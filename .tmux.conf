# ─────────────────────────────────────────────────────────────────────────────
# 1. DIM-INACTIVE PANES HOOKS (must be first)
# ─────────────────────────────────────────────────────────────────────────────
# Enable focus events (tmux ≥3.1)
set -g focus-events on

# Ensure backgrounds remain terminal-default (i.e. transparent)
set -g window-style        bg=default
set -g window-active-style bg=default

# On leaving a pane → dim its contents
set-hook -g pane-focus-out 'select-pane -P "bg=default,dim"'

# On entering a pane → restore full brightness
set-hook -g pane-focus-in  'select-pane -P "bg=default"'


# ─────────────────────────────────────────────────────────────────────────────
# 2. PREFIX & TERMINAL
# ─────────────────────────────────────────────────────────────────────────────
# Use Ctrl+Space as the prefix
unbind C-b
unbind C-Space
set -g prefix C-Space
bind C-Space send-prefix

# Ensure 256-color support
set -g default-terminal "tmux-256color"

# ─────────────────────────────────────────────────────────────────────────────
# 3. GENERAL BEHAVIOR
# ─────────────────────────────────────────────────────────────────────────────
# Handy reloading
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# Enable mouse support
set -g mouse on

# Increase history scrollback
set-option -g history-limit 5000

# Start pane and window indices at 1
set -g base-index 1
setw -g pane-base-index 1

# Automatically renumber windows
set -g renumber-windows on

# New windows/panes start in current path
bind c new-window -c "#{pane_current_path}"
bind-key "|" split-window -h -c "#{pane_current_path}"
bind-key "\\" split-window -fh -c "#{pane_current_path}"
bind-key "-" split-window -v -c "#{pane_current_path}"
bind-key "_" split-window -fv -c "#{pane_current_path}"

# Vim-style pane navigation
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Vim-style resizing (prefix+Ctrl-hjkl)
bind -r C-h resize-pane -L 15
bind -r C-j resize-pane -D 15
bind -r C-k resize-pane -U 15
bind -r C-l resize-pane -R 15

# Go to last window (prefix + Space)
bind Space last-window

# Better command-prompt keys
set -g status-keys vi

# ─────────────────────────────────────────────────────────────────────────────
# 4. PLUGIN MANAGER & THEME
# ─────────────────────────────────────────────────────────────────────────────
# TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'

# Plugins and themes
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'
set -g @plugin 'omerxx/catppuccin-tmux'





# Catppuccin™ styling
# left side
set -g @catppuccin_window_left_separator " "
set -g @catppuccin_window_right_separator ""
set -g @catppuccin_window_middle_separator "█"
set -g @catppuccin_window_number_position "right"
set -g @catppuccin_window_middle_separator "| "
set -g @catppuccin_window_default_fill "all"
set -g @catppuccin_window_default_text  "#{window_name}"
set -g @catppuccin_window_current_fill "all"
set -g @catppuccin_window_current_text "#{window_name}"
set -g @catppuccin_application_text "#{pane_current_command}"
# right side
set -g @catppuccin_status_background "none"
set -g @catppuccin_status_modules_left ""
set -g @catppuccin_status_modules_right "date_time"
set -g @catppuccin_status_left_separator "█"
set -g @catppuccin_status_right_separator "█"
set -g @catppuccin_date_time_text "%H:%M"

# Keep TPM at the bottom
run '~/.tmux/plugins/tpm/tpm'

# ─────────────────────────────────────────────────────────────────────────────
# 5. PANE BORDER COLORS (Catppuccin palette + transparent bg)
# ─────────────────────────────────────────────────────────────────────────────
set -g pane-border-style        fg=brightblack,bg=default
set -g pane-active-border-style fg=magenta,bg=default

# ─────────────────────────────────────────────────────────────────────────────
# 6. STATUS BAR BACKGROUND
# ─────────────────────────────────────────────────────────────────────────────
set -g status-position top
set -g status-bg default
set -g status-style bg=default
